<!DOCTYPE html>
<html lang="et">
  <head>
    <meta charset="UTF-8" />
    <title>CleanX Registreerimine</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f0f4f8;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 40px 10px; /* Top ja bottom ruumi */
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      .step {
        display: none;
        flex-direction: column;
        text-align: center;
      }
      .step.active {
        display: flex;
      }
      input,
      select,
      button {
        margin-top: 15px;
        padding: 10px;
        font-size: 16px;
        width: 100%;
        border-radius: 8px;
        border: 1px solid #ddd;
      }
      button {
        background: #3366cc; /* Ilus helesinine */
        color: white;
        font-weight: bold;
        border: none;
        cursor: pointer;
        transition: background 0.3s;
      }
      button:hover {
        background: #254a99; /* Hover veidi tumedam */
      }
      button.secondary {
        background: #eee;
        color: black;
      }
      .file-upload {
        border: 2px dashed #ccc;
        padding: 20px;
        text-align: center;
        margin-top: 20px;
      }
      .info-text {
        text-align: left;
        font-size: 14px;
        margin-top: 15px;
      }
      h2 {
        margin-bottom: 10px;
      }
      p {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Samm 0: Pealeht -->
      <div class="step active" id="home">
        <h2>Tere tulemast CleanX!</h2>
        <button onclick="showStep('step1')">Registreeru</button>
        <button onclick="showStep('info')">Lisainfo</button>
      </div>

      <!-- Samm 1: Registreerimisvorm -->
      <div class="step" id="step1">
        <h2>Registreeru</h2>
        <input type="text" id="firstname" placeholder="Eesnimi" required />
        <input type="text" id="lastname" placeholder="Perekonnanimi" required />
        <input type="email" id="email" placeholder="E-maili aadress" required />
        <input
          type="text"
          id="referral"
          placeholder="Soovituskood (valikuline)"
        />
        <input
          type="text"
          id="birthdate"
          placeholder="Sünniaeg (PP.KK.AAAA)"
          maxlength="10"
          oninput="formatBirthdate()"
          required
        />
        <input
          type="text"
          id="idcode"
          placeholder="Isikukood"
          maxlength="11"
          pattern="\d{11}"
          required
        />
        <select id="documentType">
          <option value="">Vali dokumendi tüüp</option>
          <option value="Eesti ID-kaart">Eesti ID-kaart</option>
          <option value="Eesti pass">Eesti pass</option>
          <option value="Elamisluba">Elamisluba</option>
        </select>
        <div class="file-upload">
          <p>Lohista fail siia<br />või klõpsa, et valida</p>
          <input type="file" id="fileInput" style="margin-top: 10px" />
        </div>
        <button onclick="submitForm()">Lõpeta</button>
        <button class="secondary" onclick="showStep('home')">Tagasi</button>
      </div>

      <!-- Samm 2: Täname -->
      <div class="step" id="thanks">
        <h2>Täname!</h2>
        <p>Võtame Teiega peatselt ühendust!</p>
        <button onclick="showStep('home')">Tagasi pealehele</button>
      </div>

      <!-- Samm 3: Lisainfo -->
      <div class="step" id="info">
        <h2>CleanX Kulleriks Saamise Nõuded</h2>
        <div class="info-text">
          <p>
            <strong>1. Õigus töötada Eestis</strong><br />
            - Pead olema vähemalt 18-aastane.<br />
            - Kehtiv Eesti ID-kaart, pass või elamisluba.
          </p>

          <p>
            <strong>2. Ettevõtlusvorm</strong><br />
            - FIE (Füüsilisest isikust ettevõtja)<br />
            - OÜ (Osaühing)<br />
            - Ettevõtluskonto.
          </p>

          <p>
            <strong>3. Arvelduskonto</strong><br />
            - Eesti IBAN arvelduskonto.
          </p>

          <p>
            <strong>4. Maksustamine</strong><br />
            - FIE puhul deklareerid ja maksad ise.<br />
            - Ettevõtluskonto puhul tasud automaatselt 20% makse.
          </p>

          <p>
            <strong>5. Vajalikud dokumendid</strong><br />
            - Isikut tõendav dokument.<br />
            - Vajadusel sõiduki dokument.
          </p>

          <p>
            <strong>6. Tehnilised nõuded</strong><br />
            - Nutitelefon (iOS või Android).<br />
            - Eesti või inglise keele oskus.
          </p>
        </div>
        <button class="secondary" onclick="showStep('home')">Tagasi</button>
      </div>
    </div>

    <script>
      function showStep(stepId) {
        document
          .querySelectorAll(".step")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(stepId).classList.add("active");
      }

      function formatBirthdate() {
        const input = document.getElementById("birthdate");
        let value = input.value.replace(/\D/g, "");

        if (value.length >= 3 && value.length <= 4) {
          value = value.slice(0, 2) + "." + value.slice(2);
        } else if (value.length >= 5 && value.length <= 8) {
          value =
            value.slice(0, 2) + "." + value.slice(2, 4) + "." + value.slice(4);
        }
        input.value = value;
      }

      function submitForm() {
        const formData = new FormData();
        formData.append(
          "firstname",
          document.getElementById("firstname").value
        );
        formData.append("lastname", document.getElementById("lastname").value);
        formData.append("email", document.getElementById("email").value);
        formData.append("referral", document.getElementById("referral").value);
        formData.append(
          "birthdate",
          document.getElementById("birthdate").value
        );
        formData.append("idcode", document.getElementById("idcode").value);
        formData.append(
          "documentType",
          document.getElementById("documentType").value
        );
        formData.append("file", document.getElementById("fileInput").files[0]);

        fetch("send_form.php", {
          method: "POST",
          body: formData,
        })
          .then((response) => {
            if (response.ok) {
              showStep("thanks");
            } else {
              alert("Midagi läks valesti. Palun proovi uuesti!");
            }
          })
          .catch((error) => {
            alert("Viga: " + error);
          });
      }
    </script>
  </body>
</html>
